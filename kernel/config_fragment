# Linux Kernel Config Fragment for Spirit
# Append this to the default x86_64_defconfig

# 1. Virtualization & Passthrough
CONFIG_KVM=y
CONFIG_KVM_INTEL=y
CONFIG_KVM_AMD=y
CONFIG_VFIO=y
CONFIG_VFIO_PCI=y
CONFIG_VFIO_IOMMU_TYPE1=y
CONFIG_VIRTIO_PCI=y
CONFIG_VIRTIO_BLK=y
CONFIG_VIRTIO_NET=y

# 2. Filesystems
CONFIG_FUSE_FS=y
CONFIG_OVERLAY_FS=y
CONFIG_TMPFS=y
CONFIG_DEVTMPFS=y
CONFIG_DEVTMPFS_MOUNT=y

# 3. Graphics & Framebuffer
CONFIG_DRM=y
CONFIG_DRM_KMS_HELPER=y
CONFIG_DRM_QXL=y
CONFIG_DRM_VIRTIO_GPU=y
CONFIG_FB=y
CONFIG_FB_EFI=y
CONFIG_FB_SIMPLE=y

# 4. Input
CONFIG_INPUT_EVDEV=y
CONFIG_KEYBOARD_ATKBD=y

# 5. Boot / Misc
CONFIG_CMDLINE_BOOL=y
CONFIG_CMDLINE="console=ttyS0 console=tty0 quiet"
