# ğŸ¯ CROM-OS SPIRIT: Sistema Visual Nexus

---

## 1. Stack de Tecnologia

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ARQUITETURA NEXUS                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  INTERFACE DO USUÃRIO                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Modo Bubble  â”‚  â”‚ HUD Dashboardâ”‚  â”‚ Terminal Gridâ”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                              â”‚                                   â”‚
â”‚  ENGINE DE RENDERIZAÃ‡ÃƒO                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Raylib    â”‚  â”‚   OpenGL   â”‚  â”‚  Compositor (DRM)  â”‚        â”‚
â”‚  â”‚  (API Go)  â”‚  â”‚  (Nativo)  â”‚  â”‚  Render Direto     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                              â”‚                                   â”‚
â”‚  ENGINE DE SCRIPTING                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  QuickJS   â”‚  â”‚  Go Plugin â”‚  â”‚   Bridge IPC       â”‚        â”‚
â”‚  â”‚  (Widgets) â”‚  â”‚  (Nativo)  â”‚  â”‚   (Barramento)     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Por que este Stack?

| Componente | Escolha | RazÃ£o                               |
| ---------- | ------- | ----------------------------------- |
| Linguagem  | Go      | BinÃ¡rio estÃ¡tico, compilaÃ§Ã£o rÃ¡pida |
| GrÃ¡ficos   | Raylib  | OpenGL sem bloat, 2D/3D             |
| Display    | DRM/KMS | Framebuffer direto, sem X11/Wayland |
| Scripting  | QuickJS | Engine JS tiny (~200KB)             |

---

## 2. Estados da Interface

### Diagrama de Estados

```
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚    BUBBLE     â”‚   â”‚   DASHBOARD   â”‚   â”‚ TERMINAL GRID â”‚
            â”‚    (Estado A) â”‚â—„â”€â–ºâ”‚   (Estado B)  â”‚â—„â”€â–ºâ”‚   (Estado C)  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Gatilhos: Clique do mouse, Hotkey (Super+Space), Comando de voz
```

---

### Estado A: Modo Bubble (PresenÃ§a MÃ­nima)

O **Bubble** Ã© um ponto de controle flutuante sempre visÃ­vel.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                â”‚
â”‚                    [Outra AplicaÃ§Ã£o/VM]                        â”‚
â”‚                                                                â”‚
â”‚                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                                                    â”‚  â—‰     â”‚  â”‚
â”‚                                                    â”‚ Spirit â”‚  â”‚
â”‚                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â–²      â”‚
â”‚                                                    ArrastÃ¡vel  â”‚
â”‚                                                    64x64 px    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Recursos do Bubble:
â€¢ Sempre no topo (overlay)
â€¢ ArrastÃ¡vel para qualquer canto
â€¢ Toque Ãºnico â†’ Menu rÃ¡pido
â€¢ Pressionar longo â†’ Dashboard
â€¢ Cor indica status:
  - Azul (ocioso)
  - Verde (processando)
  - Amarelo (atenÃ§Ã£o)
  - Vermelho (alerta crÃ­tico)
```

---

### Estado B: Modo Dashboard (HUD Overlay)

Display **heads-up** semi-transparente com info do sistema.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
â”‚ â–‘â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â–‘â–‘ â”‚
â”‚ â–‘â”‚ CROM-OS SPIRIT                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â–‘â–‘ â”‚
â”‚ â–‘â”‚                                          â”‚ ğŸ• 14:32  â”‚ â”‚â–‘â–‘ â”‚
â”‚ â–‘â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â–‘â–‘ â”‚
â”‚ â–‘â”‚ â”‚   CPU 24%    â”‚  â”‚ Modo Atual       â”‚                 â”‚â–‘â–‘ â”‚
â”‚ â–‘â”‚ â”‚   RAM 4.2GB  â”‚  â”‚ > Spirit Ativo   â”‚                 â”‚â–‘â–‘ â”‚
â”‚ â–‘â”‚ â”‚   NET 12MB/s â”‚  â”‚   Windows (Pausa)â”‚                 â”‚â–‘â–‘ â”‚
â”‚ â–‘â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚â–‘â–‘ â”‚
â”‚ â–‘â”‚                                                        â”‚â–‘â–‘ â”‚
â”‚ â–‘â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â–‘â–‘ â”‚
â”‚ â–‘â”‚ â”‚ >_ Terminal                                        â”‚ â”‚â–‘â–‘ â”‚
â”‚ â–‘â”‚ â”‚ spirit@crom ~ $                                    â”‚ â”‚â–‘â–‘ â”‚
â”‚ â–‘â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â–‘â–‘ â”‚
â”‚ â–‘â”‚ [Terminal]  [Browser]  [Arquivos]  [VMs]  [Config]    â”‚â–‘â–‘ â”‚
â”‚ â–‘â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â–‘â–‘ â”‚
â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ EFEITO BLUR â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Estado C: Modo Terminal Grid (Power User)

Gerenciador de janelas em tiles para mÃºltiplos terminais.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Terminal 1: spirit@crom     â”‚ Terminal 2: htop            â”‚ â”‚
â”‚ â”‚                              â”‚                             â”‚ â”‚
â”‚ â”‚ $ @windows dir C:\          â”‚   1  [   systemd]  0.0%     â”‚ â”‚
â”‚ â”‚  Volume in drive C is OS    â”‚  Mem[||||     256M/8G]      â”‚ â”‚
â”‚ â”‚                              â”‚                             â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ Terminal 3: logs            â”‚ Terminal 4: nodus           â”‚ â”‚
â”‚ â”‚                              â”‚                             â”‚ â”‚
â”‚ â”‚ Dec 13 12:00:01 kernel:     â”‚ Peers: 3 conectados         â”‚ â”‚
â”‚ â”‚   [info] Spirit boot ok     â”‚ â–  192.168.1.10 (desktop)    â”‚ â”‚
â”‚ â”‚                              â”‚ â–  192.168.1.15 (laptop)     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ [1:term] [2:htop] [3:logs] [4:nodus]  â”‚ Layout: 2x2  â”‚ 14:33  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. TransiÃ§Ãµes de Estado

| De        | Para      | Gatilho     | AnimaÃ§Ã£o    |
| --------- | --------- | ----------- | ----------- |
| Bubble    | Dashboard | Clique      | Expandir    |
| Dashboard | Bubble    | Clique fora | Colapsar    |
| Dashboard | Terminal  | Super+Enter | Slide       |
| Terminal  | Dashboard | Super+Space | Slide volta |

---

## 4. Browser Headless

O Nexus nÃ£o usa engine de browser completa. Usa **extraÃ§Ã£o de conteÃºdo**:

```
RequisiÃ§Ã£o: "Mostrar news.ycombinator.com"
    â”‚
    â–¼
Cliente HTTP (Go) â†’ Fetch HTML
    â”‚
    â–¼
Extrator de ConteÃºdo â†’ Remove scripts/ads, extrai texto
    â”‚
    â–¼
Renderer Nativo (Raylib) â†’ Mostra texto limpo

Resultado:
- Sem execuÃ§Ã£o de JavaScript
- ~100KB RAM por pÃ¡gina (vs 450MB Chrome)
- Render instantÃ¢neo
```

---

## 5. Sistema de Comandos @

```
Sintaxe: @<alvo> <comando> [args...]

Alvos:
  @spirit     Executar no Spirit (host)
  @windows    Executar na VM Windows
  @linux      Executar na VM Linux
  @docker     Executar em container
  @ai         Perguntar ao sysadmin IA

Exemplos:
  @windows dir C:\Users
  @windows start steam
  @linux apt update
  @ai "por que estÃ¡ lento?"
```

---

## 6. Sistema de Widgets

### ConfiguraÃ§Ã£o (YAML)

```yaml
# ~/.config/spirit/dashboard.yaml
layout:
  columns: 3
  rows: 4

widgets:
  - id: clock
    type: clock
    position: { col: 2, row: 0 }

  - id: system
    type: metrics
    position: { col: 0, row: 0, rowSpan: 2 }

  - id: term
    type: terminal
    position: { col: 0, row: 2, colSpan: 3, rowSpan: 2 }
```

---

## 7. Scripting com QuickJS

```javascript
// ~/.config/spirit/scripts/startup.js

// Acessar info do sistema
const cpu = Spirit.system.cpu();
console.log(`CPU: ${cpu.usage}%`);

// Interagir com VMs
Spirit.vms.list().forEach((vm) => {
  console.log(`VM: ${vm.name} - ${vm.state}`);
});

// Controlar UI
Spirit.ui.notify("Bem-vindo ao Crom-OS Spirit!", "info");

// Atalhos de teclado
Spirit.input.onKey("ctrl+shift+t", () => {
  Spirit.terminal.spawn();
});
```

---

## 8. Metas de Performance

```
MÃ©trica                  Alvo             Medido
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Tempo de startup         < 300ms          ~200ms
TransiÃ§Ã£o de estado      < 100ms          ~80ms
LatÃªncia de input        < 16ms           ~8ms
FPS de render            60 FPS           60 FPS
CPU idle                 < 1%             ~0.5%
RAM idle                 < 50MB           ~40MB
```

---

_VersÃ£o do Documento: 1.0_  
_Projeto: Crom-OS Spirit (Project Aether)_  
_ClassificaÃ§Ã£o: EspecificaÃ§Ã£o de Interface_
